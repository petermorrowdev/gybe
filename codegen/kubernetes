#!/usr/bin/env bash
set -e

(cd kubernetes && git checkout master -q)

function gen_k8s() {
  local version="$1"
  local version_module="$2"
  (cd kubernetes && git checkout $version -q)
  rm -rf gybe/kubernetes/$version_module
  python codegen/generate_k8s.py $version_module
  ruff check --quiet --fix gybe/k8s/v*
  ruff format --quiet gybe/k8s/v*
  (cd kubernetes && git checkout master -q)
}

# https://kubernetes.io/releases/
gen_k8s 'v1.26.3' 'v1_26'
gen_k8s 'v1.27.9' 'v1_27'
gen_k8s 'v1.28.5' 'v1_28'
gen_k8s 'v1.29.0' 'v1_29'

(cd kubernetes && git checkout master -q)
